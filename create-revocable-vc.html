

<!DOCTYPE html>


<html lang="en" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>All about VC &amp; Revocable VCs &#8212; Self sovereign identity with Affinidi SDK</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=12da95d707ffb74b382d" rel="stylesheet" />
<link href="_static/styles/bootstrap.css?digest=12da95d707ffb74b382d" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=12da95d707ffb74b382d" rel="stylesheet" />

  
  <link href="_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=12da95d707ffb74b382d" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" href="_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="_static/custom.css" />
    <link rel="stylesheet" type="text/css" href="_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=12da95d707ffb74b382d" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=12da95d707ffb74b382d" />

    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script src="_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="_static/sphinx-thebe.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'create-revocable-vc';</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Howto offer VC to Holder" href="request-for-offer.html" />
    <link rel="prev" title="Create Affinidi Wallet Demo" href="demo-sdk-create-wallet.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
  

<a class="navbar-brand logo" href="intro.html">
  
  
  
  
  
    <p class="title logo__title">Self sovereign identity with Affinidi SDK</p>
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="intro.html">
                    Welcome to Self Sovereign Identity with Affinidi SDK
                </a>
            </li>
        </ul>
        <ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="demo-sdk-create-wallet.html">Create Affinidi Wallet Demo</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">All about VC &amp; Revocable VCs</a></li>
<li class="toctree-l1"><a class="reference internal" href="request-for-offer.html">Howto offer VC to Holder</a></li>



<li class="toctree-l1"><a class="reference internal" href="share-vp.html">Howto Share VC with Verifier</a></li>






<li class="toctree-l1"><a class="reference internal" href="pex-vp.html">Presentation Exchange</a></li>


<li class="toctree-l1"><a class="reference internal" href="credential-storage.html">Affinidi Vault - Credential Storage</a></li>
<li class="toctree-l1"><a class="reference internal" href="user-managment.html">Affinidi Vault - Custodial Wallet</a></li>

<li class="toctree-l1"><a class="reference internal" href="didweb.html">DIDs</a></li>


</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/Volland/sdk-notebooks" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/Volland/sdk-notebooks/issues/new?title=Issue%20on%20page%20%2Fcreate-revocable-vc.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="_sources/create-revocable-vc.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>


<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script>

<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>All about VC & Revocable VCs</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#lets-create-a-unsigned-credential">Lets create a Unsigned Credential</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#lets-sign-it">Lets sign it</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#verification">Verification</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#revocation">Revocation</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#revocation-api-internals">Revocation API internals</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="all-about-vc-revocable-vcs">
<h1>All about VC &amp; Revocable VCs<a class="headerlink" href="#all-about-vc-revocable-vcs" title="Permalink to this heading">#</a></h1>
<p>Verifiable credentials is a core of self sovering identity. <a class="reference external" href="https://www.w3.org/TR/vc-data-model/">VC data model spec</a> describe it in details in next video</p>
<div class="container16x9"><iframe src="https://www.youtube.com/embed/owbkzvLhblk" class="responsive-iframe" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe></div><p>Lets prepare our test wallets
You could follow this notebook in video</p>
<div class="container16x9"><iframe src="https://www.youtube.com/embed/91oIel04pvE" class="responsive-iframe" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe></div><div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">createWallet</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;@affinidi/wallet-node-sdk&#39;</span><span class="p">)</span>
<span class="c1">// @ts-ignore</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">walletFactory</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">createWallet</span><span class="p">(</span><span class="s1">&#39;AffinityCore&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Lets prepare options</p>
<ul class="simple">
<li><p>get your API key <a class="reference external" href="https://apikey.affinidi.com/">production</a> or register affinidi account on <a class="reference external" href="https://build.affinidi.com/register">register</a></p></li>
<li><p>set env to prod</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="kd">const</span><span class="w"> </span><span class="nx">accessApiKey</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;&lt;your api key&gt;&#39;</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="kd">const</span><span class="w"> </span><span class="nx">options</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">env</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;prod&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="nx">accessApiKey</span><span class="p">,</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<p>Lets create our issuer and holder wallets.
We need to have a holder did to issue a VC for concrete holder.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="nx">password</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="sb">`P@</span><span class="si">${</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">1</span><span class="p">).</span><span class="nx">toString</span><span class="p">(</span><span class="mf">36</span><span class="p">).</span><span class="nx">substring</span><span class="p">(</span><span class="mf">2</span><span class="p">)</span><span class="si">}</span><span class="sb">!!42`</span><span class="p">;</span>

<span class="w">  </span><span class="nx">walletIssuer</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">walletFactory</span><span class="p">.</span><span class="nx">createWallet</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span><span class="w"> </span><span class="nx">password</span><span class="p">)</span>
<span class="w">  </span><span class="nx">walletHolder</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">walletFactory</span><span class="p">.</span><span class="nx">createWallet</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span><span class="w"> </span><span class="nx">password</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<section id="lets-create-a-unsigned-credential">
<h2>Lets create a Unsigned Credential<a class="headerlink" href="#lets-create-a-unsigned-credential" title="Permalink to this heading">#</a></h2>
<p>I just create a custom schema for content Like VCs. Its allow to issue verifiable likes for a content that i like.
<a class="reference external" href="https://ui.schema.affinidi.com/schemas/ContentLikeV1-0">Schema</a></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="c1">// https://ui.schema.affinidi.com/schemas/ContentLikeV1-0</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">jsonSchema</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;https://schema.affinidi.com/ContentLikeV1-0.json&#39;</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">jsonContext</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;https://schema.affinidi.com/ContentLikeV1-0.jsonld&#39;</span>
</pre></div>
</div>
</div>
</div>
<p>Every VC should have a unique id.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="kd">const</span><span class="w"> </span><span class="nx">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="sb">`claimId:</span><span class="si">${</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">1</span><span class="p">).</span><span class="nx">toString</span><span class="p">(</span><span class="mf">36</span><span class="p">).</span><span class="nx">substring</span><span class="p">(</span><span class="mf">2</span><span class="p">)</span><span class="si">}</span><span class="sb">`</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">unsignedVC</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="s1">&#39;@context&#39;</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;https://www.w3.org/2018/credentials/v1&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">jsonContext</span><span class="p">],</span>
<span class="w">    </span><span class="nx">id</span><span class="p">,</span>
<span class="w">    </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;VerifiableCredential&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;ContentLike&#39;</span><span class="p">],</span>
<span class="w">    </span><span class="nx">holder</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="kt">walletHolder.did</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nx">credentialSubject</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">data</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="s1">&#39;@type&#39;</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;VerifiableCredential&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;ContentLike&#39;</span><span class="p">],</span>
<span class="w">        </span><span class="nx">url</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;https://www.youtube.com/watch?v=owbkzvLhblk&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="nx">date</span><span class="o">:</span><span class="w"> </span><span class="kt">new</span><span class="w"> </span><span class="nb">Date</span><span class="p">().</span><span class="nx">toISOString</span><span class="p">(),</span>
<span class="w">        </span><span class="nx">like</span><span class="o">:</span><span class="w"> </span><span class="kt">true</span><span class="p">,</span>
<span class="w">        </span><span class="nx">score</span><span class="o">:</span><span class="w"> </span><span class="kt">10</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nx">credentialSchema</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">id</span><span class="o">:</span><span class="w">  </span><span class="kt">jsonSchema</span><span class="p">,</span>
<span class="w">      </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;JsonSchemaValidator2018&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nx">issuanceDate</span><span class="o">:</span><span class="w"> </span><span class="kt">new</span><span class="w"> </span><span class="nb">Date</span><span class="p">().</span><span class="nx">toISOString</span><span class="p">(),</span>
<span class="w">    </span><span class="nx">expirationDate</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;2065-09-10T00:00:00.000Z&#39;</span><span class="p">,</span>
<span class="w">  </span><span class="p">}</span>
<span class="w">  </span><span class="nx">unsignedVC</span><span class="w">  </span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{
  &#39;@context&#39;: [
    &#39;https://www.w3.org/2018/credentials/v1&#39;,
    &#39;https://schema.affinidi.com/ContentLikeV1-0.jsonld&#39;
  ],
  id: &#39;claimId:i2wgld5x7b&#39;,
  type: [ &#39;VerifiableCredential&#39;, &#39;ContentLike&#39; ],
  holder: {
    id: &#39;did:elem:EiAs9VqvNcEMkm9OfMdseWR0jMIltWHuUd5tCK_f17M6jA;elem:initial-state=eyJwcm90ZWN0ZWQiOiJleUp2Y0dWeVlYUnBiMjRpT2lKamNtVmhkR1VpTENKcmFXUWlPaUlqY0hKcGJXRnllU0lzSW1Gc1p5STZJa1ZUTWpVMlN5SjkiLCJwYXlsb2FkIjoiZXlKQVkyOXVkR1Y0ZENJNkltaDBkSEJ6T2k4dmR6TnBaQzV2Y21jdmMyVmpkWEpwZEhrdmRqSWlMQ0p3ZFdKc2FXTkxaWGtpT2x0N0ltbGtJam9pSTNCeWFXMWhjbmtpTENKMWMyRm5aU0k2SW5OcFoyNXBibWNpTENKMGVYQmxJam9pVTJWamNESTFObXN4Vm1WeWFXWnBZMkYwYVc5dVMyVjVNakF4T0NJc0luQjFZbXhwWTB0bGVVaGxlQ0k2SWpBek5UUXhZMk01T1RabU56VmxaR1U1WkRnd00yVXlOVE5oTm1FNU5UWXdOekF5TWprMk1EaGhNemM0WVRWbE56RmlaV1V4WldGaE1EQXpObU0zTkdJME1DSjlMSHNpYVdRaU9pSWpjbVZqYjNabGNua2lMQ0oxYzJGblpTSTZJbkpsWTI5MlpYSjVJaXdpZEhsd1pTSTZJbE5sWTNBeU5UWnJNVlpsY21sbWFXTmhkR2x2Ymt0bGVUSXdNVGdpTENKd2RXSnNhV05MWlhsSVpYZ2lPaUl3TTJOaU1qZzFPVGRrWkRjM016bG1OREl3WTJaaVpEUXdOekZtTUdNNU5Ua3dPRFZtWVRBNVlqSXlOR1l4Tm1ZeE1UbGlOelV6WVRZeVpXVTJaalJqT1RRaWZWMHNJbUYxZEdobGJuUnBZMkYwYVc5dUlqcGJJaU53Y21sdFlYSjVJbDBzSW1GemMyVnlkR2x2YmsxbGRHaHZaQ0k2V3lJamNISnBiV0Z5ZVNKZGZRIiwic2lnbmF0dXJlIjoiOXg1UVpYS0h4OEFCSmd2cmhqVFhhR2NGUC1TSVdoYVJCeW1Vbm9vOGk2dGdMaDhWSnlWWGxnbS0xaTZqSXROTW1NZXEwX2t1SUZRZnVNelVNdVNMbXcifQ&#39;
  },
  credentialSubject: {
    data: {
      &#39;@type&#39;: [Array],
      url: &#39;https://www.youtube.com/watch?v=owbkzvLhblk&#39;,
      date: &#39;2022-09-09T13:22:20.668Z&#39;,
      like: true,
      score: 10
    }
  },
  credentialSchema: {
    id: &#39;https://schema.affinidi.com/ContentLikeV1-0.json&#39;,
    type: &#39;JsonSchemaValidator2018&#39;
  },
  issuanceDate: &#39;2022-09-09T13:22:20.668Z&#39;,
  expirationDate: &#39;2065-09-10T00:00:00.000Z&#39;
}
</pre></div>
</div>
</div>
</div>
<p>It is already good VC to sign but what if i ll change my mind in a future ?</p>
<p>VCs are immutable and owned by holder. Once you issue tham you do not have a control on VC any more.</p>
<p>We have a special type of VCs that allow you to Revoke a VC in a future even if you dont have a control on VC itself</p>
<p>It is based on <a class="reference external" href="https://w3c-ccg.github.io/vc-status-rl-2020/#core-concept">Revocation List 2020</a> standard</p>
<p>It is quite complex flow but we make it easy for you and implement a method in our SDK.
You could upgrade your VC to revocapbe VC. We will prepare and publish revocation list for you</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="kd">const</span><span class="w">  </span><span class="nx">RevocableVC</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">walletIssuer</span><span class="p">.</span><span class="nx">buildRevocationListStatus</span><span class="p">(</span><span class="nx">unsignedVC</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell tag_hide-input docutils container">
<details class="hide above-input">
<summary aria-label="Toggle hidden content">
<span class="collapsed">Show code cell source</span>
<span class="expanded">Hide code cell source</span>
</summary>
<div class="cell_input docutils container">
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="nx">RevocableVC</span>
</pre></div>
</div>
</div>
</details>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{
  &#39;@context&#39;: [
    &#39;https://www.w3.org/2018/credentials/v1&#39;,
    &#39;https://schema.affinidi.com/ContentLikeV1-0.jsonld&#39;,
    &#39;https://w3id.org/vc-revocation-list-2020/v1&#39;
  ],
  id: &#39;claimId:i2wgld5x7b&#39;,
  type: [ &#39;VerifiableCredential&#39;, &#39;ContentLike&#39; ],
  holder: {
    id: &#39;did:elem:EiAs9VqvNcEMkm9OfMdseWR0jMIltWHuUd5tCK_f17M6jA;elem:initial-state=eyJwcm90ZWN0ZWQiOiJleUp2Y0dWeVlYUnBiMjRpT2lKamNtVmhkR1VpTENKcmFXUWlPaUlqY0hKcGJXRnllU0lzSW1Gc1p5STZJa1ZUTWpVMlN5SjkiLCJwYXlsb2FkIjoiZXlKQVkyOXVkR1Y0ZENJNkltaDBkSEJ6T2k4dmR6TnBaQzV2Y21jdmMyVmpkWEpwZEhrdmRqSWlMQ0p3ZFdKc2FXTkxaWGtpT2x0N0ltbGtJam9pSTNCeWFXMWhjbmtpTENKMWMyRm5aU0k2SW5OcFoyNXBibWNpTENKMGVYQmxJam9pVTJWamNESTFObXN4Vm1WeWFXWnBZMkYwYVc5dVMyVjVNakF4T0NJc0luQjFZbXhwWTB0bGVVaGxlQ0k2SWpBek5UUXhZMk01T1RabU56VmxaR1U1WkRnd00yVXlOVE5oTm1FNU5UWXdOekF5TWprMk1EaGhNemM0WVRWbE56RmlaV1V4WldGaE1EQXpObU0zTkdJME1DSjlMSHNpYVdRaU9pSWpjbVZqYjNabGNua2lMQ0oxYzJGblpTSTZJbkpsWTI5MlpYSjVJaXdpZEhsd1pTSTZJbE5sWTNBeU5UWnJNVlpsY21sbWFXTmhkR2x2Ymt0bGVUSXdNVGdpTENKd2RXSnNhV05MWlhsSVpYZ2lPaUl3TTJOaU1qZzFPVGRrWkRjM016bG1OREl3WTJaaVpEUXdOekZtTUdNNU5Ua3dPRFZtWVRBNVlqSXlOR1l4Tm1ZeE1UbGlOelV6WVRZeVpXVTJaalJqT1RRaWZWMHNJbUYxZEdobGJuUnBZMkYwYVc5dUlqcGJJaU53Y21sdFlYSjVJbDBzSW1GemMyVnlkR2x2YmsxbGRHaHZaQ0k2V3lJamNISnBiV0Z5ZVNKZGZRIiwic2lnbmF0dXJlIjoiOXg1UVpYS0h4OEFCSmd2cmhqVFhhR2NGUC1TSVdoYVJCeW1Vbm9vOGk2dGdMaDhWSnlWWGxnbS0xaTZqSXROTW1NZXEwX2t1SUZRZnVNelVNdVNMbXcifQ&#39;
  },
  credentialSubject: {
    data: {
      &#39;@type&#39;: [Array],
      url: &#39;https://www.youtube.com/watch?v=owbkzvLhblk&#39;,
      date: &#39;2022-09-09T13:22:20.668Z&#39;,
      like: true,
      score: 10
    }
  },
  credentialSchema: {
    id: &#39;https://schema.affinidi.com/ContentLikeV1-0.json&#39;,
    type: &#39;JsonSchemaValidator2018&#39;
  },
  issuanceDate: &#39;2022-09-09T13:22:20.668Z&#39;,
  expirationDate: &#39;2065-09-10T00:00:00.000Z&#39;,
  credentialStatus: {
    id: &#39;https://revocation-api.prod.affinity-project.org/api/v1/revocation/revocation-list-2020-credentials/did:elem:EiBIkVawTQOfOCYp2xSITNKKePuELFTj3oc1ITnxk2uehw/20551#1&#39;,
    type: &#39;RevocationList2020Status&#39;,
    revocationListIndex: &#39;1&#39;,
    revocationListCredential: &#39;https://revocation-api.prod.affinity-project.org/api/v1/revocation/revocation-list-2020-credentials/did:elem:EiBIkVawTQOfOCYp2xSITNKKePuELFTj3oc1ITnxk2uehw/20551&#39;
  }
}
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="kd">const</span><span class="w"> </span><span class="nx">revocationListVc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">fetch</span><span class="p">(</span><span class="nx">RevocableVC</span><span class="p">.</span><span class="nx">credentialStatus</span><span class="p">.</span><span class="nx">revocationListCredential</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Together with a VC we issue a Revocation List VC connected to our Credential. This credential is Issuer specific List and Signed and controled by issuer. Every time when Issuer bublish new Revocable VC or revoke a VC. Revocation List gets updated and published.</p>
<div class="cell tag_hide-input docutils container">
<details class="hide above-input">
<summary aria-label="Toggle hidden content">
<span class="collapsed">Show code cell source</span>
<span class="expanded">Hide code cell source</span>
</summary>
<div class="cell_input docutils container">
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="nx">revocationListVc</span><span class="p">.</span><span class="nx">json</span><span class="p">()</span>
</pre></div>
</div>
</div>
</details>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{
  id: &#39;https://revocation-api.prod.affinity-project.org/api/v1/revocation/revocation-list-2020-credentials/did:elem:EiBIkVawTQOfOCYp2xSITNKKePuELFTj3oc1ITnxk2uehw/20551&#39;,
  &#39;@context&#39;: [
    &#39;https://www.w3.org/2018/credentials/v1&#39;,
    &#39;https://w3id.org/vc-revocation-list-2020/v1&#39;
  ],
  type: [ &#39;VerifiableCredential&#39;, &#39;RevocationList2020Credential&#39; ],
  issuer: &#39;did:elem:EiBIkVawTQOfOCYp2xSITNKKePuELFTj3oc1ITnxk2uehw;elem:initial-state=eyJwcm90ZWN0ZWQiOiJleUp2Y0dWeVlYUnBiMjRpT2lKamNtVmhkR1VpTENKcmFXUWlPaUlqY0hKcGJXRnllU0lzSW1Gc1p5STZJa1ZUTWpVMlN5SjkiLCJwYXlsb2FkIjoiZXlKQVkyOXVkR1Y0ZENJNkltaDBkSEJ6T2k4dmR6TnBaQzV2Y21jdmMyVmpkWEpwZEhrdmRqSWlMQ0p3ZFdKc2FXTkxaWGtpT2x0N0ltbGtJam9pSTNCeWFXMWhjbmtpTENKMWMyRm5aU0k2SW5OcFoyNXBibWNpTENKMGVYQmxJam9pVTJWamNESTFObXN4Vm1WeWFXWnBZMkYwYVc5dVMyVjVNakF4T0NJc0luQjFZbXhwWTB0bGVVaGxlQ0k2SWpBek1HTXdOMlZtTnpFeU1ETTVaamhtWkdOa1ltVmtPR0V3WldJNFpqaG1ZbU5qTlRaak0ySmpOREEwTVRSak1HRTRaR1F6TVRjeFpHTm1NR1k0TW1KaE1TSjlMSHNpYVdRaU9pSWpjbVZqYjNabGNua2lMQ0oxYzJGblpTSTZJbkpsWTI5MlpYSjVJaXdpZEhsd1pTSTZJbE5sWTNBeU5UWnJNVlpsY21sbWFXTmhkR2x2Ymt0bGVUSXdNVGdpTENKd2RXSnNhV05MWlhsSVpYZ2lPaUl3TWpSaFpEa3hNR1E1WVRSa1lXWTRPV1V5WW1ZNE9USTFPVEEyWlRobU4ySmtaRGhtTVdVM01EWTROMlF6T0RJMVptRmhZems0Tm1ObE5HUmhZVFZqTVdZaWZWMHNJbUYxZEdobGJuUnBZMkYwYVc5dUlqcGJJaU53Y21sdFlYSjVJbDBzSW1GemMyVnlkR2x2YmsxbGRHaHZaQ0k2V3lJamNISnBiV0Z5ZVNKZGZRIiwic2lnbmF0dXJlIjoiVC1fc0drTmdMX294cHM1cEFYRDZWLVJCdmtjQzlKOFZJQnN3aGxYazA4TjQwXzBQQWpzbmRTb0FrbFQ5bmZxUWZRYlpLem9jek5QMVd3Z1M3bkVHMGcifQ&#39;,
  issuanceDate: &#39;2022-09-09T13:22:37.281Z&#39;,
  credentialSubject: {
    id: &#39;https://revocation-api.prod.affinity-project.org/api/v1/revocation/revocation-list-2020-credentials/did:elem:EiBIkVawTQOfOCYp2xSITNKKePuELFTj3oc1ITnxk2uehw/20551#list&#39;,
    type: &#39;RevocationList2020&#39;,
    encodedList: &#39;H4sIAAAAAAAAA-3BMQEAAADCoPVPbQsvoAAAAAAAAAAAAAAAAP4GcwM92tQwAAA&#39;
  },
  proof: {
    type: &#39;EcdsaSecp256k1Signature2019&#39;,
    created: &#39;2022-09-09T13:22:37Z&#39;,
    verificationMethod: &#39;did:elem:EiBIkVawTQOfOCYp2xSITNKKePuELFTj3oc1ITnxk2uehw#primary&#39;,
    proofPurpose: &#39;assertionMethod&#39;,
    jws: &#39;eyJhbGciOiJFUzI1NksiLCJiNjQiOmZhbHNlLCJjcml0IjpbImI2NCJdfQ..KBSUju310a1tuA-kiq79kUYST0Svn4MdFw_0pCcGoZZR-aiP1wzk1atb0tL7rhxqkJvDjnQIQo0t281-E10IjQ&#39;
  }
}
</pre></div>
</div>
</div>
</div>
</section>
<section id="lets-sign-it">
<h2>Lets sign it<a class="headerlink" href="#lets-sign-it" title="Permalink to this heading">#</a></h2>
<p>To make it verifiable we just need to sign it.
So issuence on edge is simple operation</p>
<ul class="simple">
<li><p>build vc</p></li>
<li><p>sign vc</p></li>
<li><p>sharewith holder (optional )</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="kd">const</span><span class="w"> </span><span class="nx">signedRevocableVC</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">walletIssuer</span><span class="p">.</span><span class="nx">signUnsignedCredential</span><span class="p">(</span><span class="nx">RevocableVC</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell tag_hide-input docutils container">
<details class="hide above-input">
<summary aria-label="Toggle hidden content">
<span class="collapsed">Show code cell source</span>
<span class="expanded">Hide code cell source</span>
</summary>
<div class="cell_input docutils container">
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="nx">signedRevocableVC</span>
</pre></div>
</div>
</div>
</details>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{
  &#39;@context&#39;: [
    &#39;https://www.w3.org/2018/credentials/v1&#39;,
    &#39;https://schema.affinidi.com/ContentLikeV1-0.jsonld&#39;,
    &#39;https://w3id.org/vc-revocation-list-2020/v1&#39;
  ],
  id: &#39;claimId:i2wgld5x7b&#39;,
  type: [ &#39;VerifiableCredential&#39;, &#39;ContentLike&#39; ],
  holder: {
    id: &#39;did:elem:EiAs9VqvNcEMkm9OfMdseWR0jMIltWHuUd5tCK_f17M6jA;elem:initial-state=eyJwcm90ZWN0ZWQiOiJleUp2Y0dWeVlYUnBiMjRpT2lKamNtVmhkR1VpTENKcmFXUWlPaUlqY0hKcGJXRnllU0lzSW1Gc1p5STZJa1ZUTWpVMlN5SjkiLCJwYXlsb2FkIjoiZXlKQVkyOXVkR1Y0ZENJNkltaDBkSEJ6T2k4dmR6TnBaQzV2Y21jdmMyVmpkWEpwZEhrdmRqSWlMQ0p3ZFdKc2FXTkxaWGtpT2x0N0ltbGtJam9pSTNCeWFXMWhjbmtpTENKMWMyRm5aU0k2SW5OcFoyNXBibWNpTENKMGVYQmxJam9pVTJWamNESTFObXN4Vm1WeWFXWnBZMkYwYVc5dVMyVjVNakF4T0NJc0luQjFZbXhwWTB0bGVVaGxlQ0k2SWpBek5UUXhZMk01T1RabU56VmxaR1U1WkRnd00yVXlOVE5oTm1FNU5UWXdOekF5TWprMk1EaGhNemM0WVRWbE56RmlaV1V4WldGaE1EQXpObU0zTkdJME1DSjlMSHNpYVdRaU9pSWpjbVZqYjNabGNua2lMQ0oxYzJGblpTSTZJbkpsWTI5MlpYSjVJaXdpZEhsd1pTSTZJbE5sWTNBeU5UWnJNVlpsY21sbWFXTmhkR2x2Ymt0bGVUSXdNVGdpTENKd2RXSnNhV05MWlhsSVpYZ2lPaUl3TTJOaU1qZzFPVGRrWkRjM016bG1OREl3WTJaaVpEUXdOekZtTUdNNU5Ua3dPRFZtWVRBNVlqSXlOR1l4Tm1ZeE1UbGlOelV6WVRZeVpXVTJaalJqT1RRaWZWMHNJbUYxZEdobGJuUnBZMkYwYVc5dUlqcGJJaU53Y21sdFlYSjVJbDBzSW1GemMyVnlkR2x2YmsxbGRHaHZaQ0k2V3lJamNISnBiV0Z5ZVNKZGZRIiwic2lnbmF0dXJlIjoiOXg1UVpYS0h4OEFCSmd2cmhqVFhhR2NGUC1TSVdoYVJCeW1Vbm9vOGk2dGdMaDhWSnlWWGxnbS0xaTZqSXROTW1NZXEwX2t1SUZRZnVNelVNdVNMbXcifQ&#39;
  },
  credentialSubject: {
    data: {
      &#39;@type&#39;: [Array],
      url: &#39;https://www.youtube.com/watch?v=owbkzvLhblk&#39;,
      date: &#39;2022-09-09T13:22:20.668Z&#39;,
      like: true,
      score: 10
    }
  },
  credentialSchema: {
    id: &#39;https://schema.affinidi.com/ContentLikeV1-0.json&#39;,
    type: &#39;JsonSchemaValidator2018&#39;
  },
  issuanceDate: &#39;2022-09-09T13:22:20.668Z&#39;,
  expirationDate: &#39;2065-09-10T00:00:00.000Z&#39;,
  credentialStatus: {
    id: &#39;https://revocation-api.prod.affinity-project.org/api/v1/revocation/revocation-list-2020-credentials/did:elem:EiBIkVawTQOfOCYp2xSITNKKePuELFTj3oc1ITnxk2uehw/20551#1&#39;,
    type: &#39;RevocationList2020Status&#39;,
    revocationListIndex: &#39;1&#39;,
    revocationListCredential: &#39;https://revocation-api.prod.affinity-project.org/api/v1/revocation/revocation-list-2020-credentials/did:elem:EiBIkVawTQOfOCYp2xSITNKKePuELFTj3oc1ITnxk2uehw/20551&#39;
  },
  issuer: &#39;did:elem:EiBIkVawTQOfOCYp2xSITNKKePuELFTj3oc1ITnxk2uehw;elem:initial-state=eyJwcm90ZWN0ZWQiOiJleUp2Y0dWeVlYUnBiMjRpT2lKamNtVmhkR1VpTENKcmFXUWlPaUlqY0hKcGJXRnllU0lzSW1Gc1p5STZJa1ZUTWpVMlN5SjkiLCJwYXlsb2FkIjoiZXlKQVkyOXVkR1Y0ZENJNkltaDBkSEJ6T2k4dmR6TnBaQzV2Y21jdmMyVmpkWEpwZEhrdmRqSWlMQ0p3ZFdKc2FXTkxaWGtpT2x0N0ltbGtJam9pSTNCeWFXMWhjbmtpTENKMWMyRm5aU0k2SW5OcFoyNXBibWNpTENKMGVYQmxJam9pVTJWamNESTFObXN4Vm1WeWFXWnBZMkYwYVc5dVMyVjVNakF4T0NJc0luQjFZbXhwWTB0bGVVaGxlQ0k2SWpBek1HTXdOMlZtTnpFeU1ETTVaamhtWkdOa1ltVmtPR0V3WldJNFpqaG1ZbU5qTlRaak0ySmpOREEwTVRSak1HRTRaR1F6TVRjeFpHTm1NR1k0TW1KaE1TSjlMSHNpYVdRaU9pSWpjbVZqYjNabGNua2lMQ0oxYzJGblpTSTZJbkpsWTI5MlpYSjVJaXdpZEhsd1pTSTZJbE5sWTNBeU5UWnJNVlpsY21sbWFXTmhkR2x2Ymt0bGVUSXdNVGdpTENKd2RXSnNhV05MWlhsSVpYZ2lPaUl3TWpSaFpEa3hNR1E1WVRSa1lXWTRPV1V5WW1ZNE9USTFPVEEyWlRobU4ySmtaRGhtTVdVM01EWTROMlF6T0RJMVptRmhZems0Tm1ObE5HUmhZVFZqTVdZaWZWMHNJbUYxZEdobGJuUnBZMkYwYVc5dUlqcGJJaU53Y21sdFlYSjVJbDBzSW1GemMyVnlkR2x2YmsxbGRHaHZaQ0k2V3lJamNISnBiV0Z5ZVNKZGZRIiwic2lnbmF0dXJlIjoiVC1fc0drTmdMX294cHM1cEFYRDZWLVJCdmtjQzlKOFZJQnN3aGxYazA4TjQwXzBQQWpzbmRTb0FrbFQ5bmZxUWZRYlpLem9jek5QMVd3Z1M3bkVHMGcifQ&#39;,
  proof: {
    type: &#39;EcdsaSecp256k1Signature2019&#39;,
    created: &#39;2022-09-09T13:23:18Z&#39;,
    verificationMethod: &#39;did:elem:EiBIkVawTQOfOCYp2xSITNKKePuELFTj3oc1ITnxk2uehw#primary&#39;,
    proofPurpose: &#39;assertionMethod&#39;,
    jws: &#39;eyJhbGciOiJFUzI1NksiLCJiNjQiOmZhbHNlLCJjcml0IjpbImI2NCJdfQ..egv-RIoJfND0Ga-NiqCcPXe7lA2uggrgoAm1yp2dLLVk7mEy_r2RCzVKxzNwPGoma10ZZ7JgL9MY4rrC1z-BpA&#39;
  }
}
</pre></div>
</div>
</div>
</div>
</section>
<section id="verification">
<h2>Verification<a class="headerlink" href="#verification" title="Permalink to this heading">#</a></h2>
<p>Main idea of VC is verifiable data
We could do a verification on edge with our common library</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Affinity</span><span class="o">:</span><span class="w"> </span><span class="kt">Verifier</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;@affinidi/common&#39;</span><span class="p">)</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">platformCryptographyTools</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="w"> </span><span class="p">(</span><span class="s1">&#39;@affinidi/wallet-node-sdk/dist/PlatformCryptographyTools&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="kd">const</span><span class="w"> </span><span class="nx">verifier</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">Verifier</span><span class="p">({</span>
<span class="w"> </span><span class="nx">registryUrl</span><span class="o">:</span><span class="w"> </span><span class="sb">`https://affinity-registry.</span><span class="si">${</span><span class="nx">options</span><span class="p">.</span><span class="nx">env</span><span class="si">}</span><span class="sb">.affinity-project.org`</span><span class="p">,</span>
<span class="w"> </span><span class="nx">apiKey</span><span class="o">:</span><span class="w"> </span><span class="kt">accessApiKey</span>
<span class="p">},</span><span class="w"> </span><span class="nx">platformCryptographyTools</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Lets verify</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="kd">const</span><span class="w"> </span><span class="nx">verificationResult</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">verifier</span><span class="p">.</span><span class="nx">validateCredential</span><span class="p">(</span><span class="nx">signedRevocableVC</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>{ result: true, error: ‘’ }</p>
</section>
<section id="revocation">
<h2>Revocation<a class="headerlink" href="#revocation" title="Permalink to this heading">#</a></h2>
<p>Now we could change our mind</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="w">  </span><span class="k">await</span><span class="w"> </span><span class="nx">walletIssuer</span><span class="p">.</span><span class="nx">revokeCredential</span><span class="p">(</span><span class="nx">id</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="s1">&#39; dont like any more &#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Now credential is invalid</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="kd">const</span><span class="w">  </span><span class="nx">verificationRevokedResult</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">verifier4</span><span class="p">.</span><span class="nx">validateCredential</span><span class="p">(</span><span class="nx">signedRevocableVC</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<p>(async () =&gt; {
verificationRevokedResult = await verifier4.validateCredential(signedRevocableVC)
})().catch(console.error)</p>
</div>
</div>
<p>{
result: false,
error: ‘claimId:gacultz6iz: Credential revocation status check result is negative.’
}</p>
</section>
<section id="revocation-api-internals">
<h2>Revocation API internals<a class="headerlink" href="#revocation-api-internals" title="Permalink to this heading">#</a></h2>
<p><a class="reference external" href="http://revocation-api.prod.affinity-project.org/api-docs">Affinidi Revocation Service</a> Do all managment of revocation list.
Service use did auth to reensure that issuer could have access only to his revocation lists and could revoke only his credentials</p>
<div class="cell tag_hide-input docutils container">
<details class="hide above-input">
<summary aria-label="Toggle hidden content">
<span class="collapsed">Show code cell source</span>
<span class="expanded">Hide code cell source</span>
</summary>
<div class="cell_input docutils container">
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="kd">const</span><span class="w"> </span><span class="nx">plantumlEncoder</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;plantuml-encoder&#39;</span><span class="p">)</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">tslab</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s2">&quot;tslab&quot;</span><span class="p">);</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">flow</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">plantumlEncoder</span><span class="p">.</span><span class="nx">encode</span><span class="p">(</span><span class="sb">`</span>
<span class="sb">@startuml</span>
<span class="sb">title Affinidi: VC revocation (revocation list 2020) Iusser side</span>
<span class="sb">actor  &quot;Issuer client , sdk&quot; as client</span>
<span class="sb">participant &quot;Revocation Service [[https://gitlab.com/affinidi/foundational/revocation-api repo]], [[http://revocation-api.prod.affinity-project.org/api-docs/ api]]&quot; as rs </span>
<span class="sb">== Auth ==</span>
<span class="sb">client -&gt; rs: create did auth request</span>
<span class="sb">rs -&gt; client : auth token</span>
<span class="sb">client -&gt; rs: did auth responce </span>
<span class="sb">== Issue revocable VC ==</span>
<span class="sb">note across: From the high level perspective current flow fit the [[https://w3c-ccg.github.io/vc-status-rl-2020/#generate-algorithm revocation list creating algorithm]].</span>
<span class="sb"> client -&gt; rs : buildRevocationListStatus({ credentialId: VC.id, subjectDid: VC.subject })</span>
<span class="sb">note across</span>
<span class="sb">At revocation service:</span>
<span class="sb">1. If [[https://w3c-ccg.github.io/vc-status-rl-2020/#core-concept revocation list 2020]] does not exist yet, or it&#39;s full filled - creating revocation list 2020 and build [[https://w3c-ccg.github.io/vc-status-rl-2020/#revocationlist2020credential revocationListCredential]] (Its credential which encapsulates revocation list and should be used to check revocable VC status after. P.S. this credential should be signed and published).</span>
<span class="sb">2. Save params (credentialId, subjectDid - later could be used as identifiers to revoke VC).</span>
<span class="sb">3. Build [[https://w3c-ccg.github.io/vc-status-rl-2020/#revocationlist2020status credentialStatus]] (a status which should be added to a revokable credential).</span>
<span class="sb">end note</span>
<span class="sb">rs -&gt; client : 200 [credentialStatus, (revocationListCredential &lt;only when new list was created&gt;)]</span>
<span class="sb">note across: NOTE: **IF** new revocation List was created and new revocationListCredential should be published (default size of revocation list is 100000, so this case not suppose to happens often).</span>
<span class="sb">alt &#39;yes&#39;</span>
<span class="sb">client -&gt; client: sign(revocationList)</span>
<span class="sb">client -&gt; rs: publishRevocationListCredential(signedRevocationListCredential)</span>
<span class="sb">rs -&gt; client: 200</span>
<span class="sb">end</span>
<span class="sb">== Revoke VC ==</span>
<span class="sb">client -&gt; rs: revokeCredential({ id: revocableCredential.id })</span>

<span class="sb">note across:  We can update logic to recieve subjectDid, and revoke all issued VCs for some subject. id - its credentialId which was used at buildRevocationListStatus step</span>
<span class="sb">note across: Appropriate revocation list will be updated. Updated revocationListCredential (with updated encodedList) will be returned for signing and publishing</span>

<span class="sb">rs -&gt; client: 200[revocationListCredential]</span>
<span class="sb">note across: NOTE: Sign revocationListCredential at client/SDK side</span>
<span class="sb">client -&gt; client: sign(revocationList)           </span>
<span class="sb">client -&gt; rs: publishRevocationListCredential(signedRevocationListCredential)</span>
<span class="sb">rs -&gt; client: 200</span>
<span class="sb">@enduml`</span><span class="p">)</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">urlflow</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;http://www.plantuml.com/plantuml/svg/&#39;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">flow</span>
<span class="nx">tslab</span><span class="p">.</span><span class="nx">display</span><span class="p">.</span><span class="nx">html</span><span class="p">(</span><span class="sb">`&lt;img src=&quot;</span><span class="si">${</span><span class="nx">urlflow</span><span class="si">}</span><span class="sb">&quot;/&gt;`</span><span class="p">)</span>
</pre></div>
</div>
</div>
</details>
<div class="cell_output docutils container">
<div class="output text_html"><img src="http://www.plantuml.com/plantuml/svg/jLPDZzis4BthLmosXxKNbkHiRaOto3Pf0AD1MwpJzh3mWIP75hkqoFB3pZReVy-GqbgITmqqGEkJ998pR-QzUNJsrdbcVTYfp4kl46whIZPIo0Ny_WuixZLdNke69eDd9Ps7w_drV0hBu1nQS59WnhZN5k1YwLoWRrn9R3pCm8c72s2k-v0PoYUvD8mMB-xwg2kqUyaHxkzhxurRbEMM4B5DmVMkP1siijAX4Ua0KsMFAMT64boZr-jP5u42ZDSBOxKesaZ-CQUtFv7xGjjjIQkvqDoLG4_hTO9h7MGtDt0RV0qtDrbNJlw65XR0BJAF8AG05ZTO_2kWynaTeXtTtaMxvlK3DYVd1mUTqGsL7NEbpdLTtn0PH05bRZHbOjngHmS_MBq3NoFKSbk3mZqgC6YTeLBa7e47QsEUIka3LDAdlNrB3wzvplcseDRMOLD8NUvvJXBmmULMvP7KyhijDcYfl9ofhRQqSmUdxAVwPRE5uvRrkiXWM2ILlmbIYPxYZtHobN9DliG8WlPAffOYYgsGWgGIDf6JzxBzrBt2FzDX4x9RFyJZMjqiibS5BAjlhPLhYpcF31WFBsbylGQXqG410FmSlpwYdm4fNVfB1rLGYlgi50h8-xQy50bO8zgMV2l8FbeC5h_rtHkaYlrzTrmWu9EbTuD6mw6Ml0PiE3CkA6BOFGCQCRfQ1mAvGGYEol8QU8tyOIpC5YEmogCjuDTYLP3Kv2XT7yV9RKEHOd0JDfIeHZ4jiki2Len4IvR0TWucGqqCnK2TZMZ9KqR0Q4Xbsbz9ce28Co9yYF0e-Ei2VlXlcjsLsgDhHHmRp9xwqBQshvW9qRQEjQ1Is_e8X0-f6L7LfvvnFP_3_McksT20npp3zuJqaG1W0mqUMXeFp7KU9TvCrsCB-VcNJpykuEfg-U7gAfqOQE3ZoU54sNZFIVQ-v2EpC15OiQ0yyVutWgwUgOnqyceUVyIoxdJ37AOXSy4OJS_KkvePWusZ21uRQXcZa9UFw2u7Rje-BPB4JdeqFJ7T3k3TcL8chKhFBKz7H2MU8eVHj--UPFVyecWLEKZo1QAv7KUfNo43Z4OtvWh-8DMm1e8HyRvHUYjvAtGkoVi7Cp9BL7K3mCYKPBnC184YaoAtSdftt5v0cYavSeUbw4GSwM_dovztSD8zcZ7MMqDNgh4o0Zqb_40EcUOsrI4A-ArzEA-hoO66z6b_z2nD0vLOFGQpw8EDlfBg8_BIXTHx3BrcpqcxFskOBut9YiAU1qaTQYENg_S_jV-2_fqoeV_zxo9zIogbFtXV0G00"/></div></div>
</div>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "tslab"
        },
        kernelOptions: {
            name: "tslab",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'tslab'</script>

                </article>
              

              
              
                <footer class="bd-footer-article">
                  <!-- Previous / next buttons -->
<div class="prev-next-area">
    <a class="left-prev"
       href="demo-sdk-create-wallet.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Create Affinidi Wallet Demo</p>
      </div>
    </a>
    <a class="right-next"
       href="request-for-offer.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Howto offer VC to Holder</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#lets-create-a-unsigned-credential">Lets create a Unsigned Credential</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#lets-sign-it">Lets sign it</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#verification">Verification</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#revocation">Revocation</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#revocation-api-internals">Revocation API internals</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            <div class="bd-footer-content__inner">
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Volodymyr Pavlyshyn
</p>

  </div>
  
  <div class="footer-item">
    
  <p class="copyright">
    
      © Copyright 2022.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div></div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=12da95d707ffb74b382d"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=12da95d707ffb74b382d"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>